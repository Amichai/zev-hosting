<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yakawow (Cloud)</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div id="statusMessage" class="status-bar"></div>

    <h2>yakawow <span style="font-size: 14px; color: #777;">(Cloud Edition)</span></h2>
    <span id="loadingIndicator">üîÑ Syncing...</span>

    <button class="top-right-btn" onclick="attemptLogin()">üîí Admin Login</button>
    <button class="logout-btn" onclick="handleLogout()">üö™ Log Out</button>

    <span id="usernameLabel" class="username-label"></span>

    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Home')" id="defaultOpen">Home</button>
        <button class="tablinks" onclick="openTab(event, 'Apps')">Apps</button>
        <button class="tablinks" onclick="openTab(event, 'Games')">Games</button>
        <button class="tablinks" onclick="openTab(event, 'HighScores'); renderHighScores()">High Scores</button>
        <button class="tablinks" onclick="openTab(event, 'Admin')" id="adminTabBtn">Admin</button>
    </div>

    <div id="Home" class="tabcontent">
        <h3>Home</h3>
        <p>Welcome to <strong>yakawow</strong>.</p>

        <h4 style="border-bottom: 2px solid #ddd; padding-bottom: 10px;">üì¢ Announcements</h4>
        <div id="AnnouncementsLibrary" class="announcement-container">
            <p style="color: #666; font-style: italic;">Loading news...</p>
        </div>

        <hr style="border: 0; border-top: 1px solid #ccc; margin: 30px 0;">

        <p>To add a new game from a friend, click the button below and paste the code.</p>
        <button class="action-btn" style="width:auto; padding: 15px 30px;" onclick="importFromCode()">üì• Import
            Code</button>
    </div>

    <div id="Apps" class="tabcontent">
        <h3>Apps</h3>
        <div id="AppsLibrary" class="library-grid">
            <p>Loading...</p>
        </div>
        <div id="AppsPlayer" class="player-container">
            <button class="back-btn" onclick="closeItem('Apps')">‚ùå CLOSE</button>
            <h2 id="ActiveAppTitle"></h2>
            <div id="AppsFrameContainer" class="iframe-wrapper"></div>
        </div>
    </div>

    <div id="Games" class="tabcontent">
        <h3>Games</h3>
        <div id="GamesLibrary" class="library-grid">
            <p>Loading...</p>
        </div>
        <div id="GamesPlayer" class="player-container">
            <button class="back-btn" onclick="closeItem('Games')">‚ùå CLOSE</button>
            <h2 id="ActiveGameTitle"></h2>
            <div id="GamesFrameContainer" class="iframe-wrapper"></div>
        </div>
    </div>

    <div id="HighScores" class="tabcontent">
        <h3>High Scores</h3>
        <p>Top scores across all games:</p>
        <div id="highScoresContainer">
            <p>Loading...</p>
        </div>
    </div>

    <div id="Admin" class="tabcontent">
        <h3 style="color: red;">ADMIN CONTROL PANEL</h3>
        <p>Create a game, app, or announcement.</p>

        <div class="admin-controls">
            <label><strong>1. Name / Title:</strong></label>
            <input type="text" id="itemTitle" placeholder="e.g. Update v1.0">

            <label><strong>2. Type:</strong></label>
            <select id="itemCategory" onchange="updatePlaceholder()">
                <option value="Games">Game</option>
                <option value="Apps">App</option>
                <option value="Announcements">Announcement</option>
            </select>

            <label><strong>3. Code / Message:</strong></label>
            <textarea id="itemCode" placeholder="<html>... your code here ...</html>"></textarea>

            <button class="action-btn" onclick="addToLibrary()">‚òÅÔ∏è Save to Cloud</button>
            <button class="export-btn" onclick="exportCurrentInput()">üì§ Create Share Code</button>

            <hr>
            <h4>Migration Tools</h4>
            <p style="font-size:12px; color:#555;">Use this to upload your old browser games to the new cloud system.
            </p>
            <button class="cloud-upload-btn" onclick="uploadLocalToCloud()">‚¨ÜÔ∏è Upload LocalStorage to Cloud</button>

            <br><br>
            <button class="danger-btn" onclick="clearCloudData()">‚ö†Ô∏è WIPE Cloud Data</button>
        </div>
    </div>

    <div id="ShareModal" class="share-modal">
        <div class="share-box">
            <h3>Share Code</h3>
            <p>Click Copy, then send this code to a friend!</p>
            <textarea id="shareOutput" class="share-textarea" readonly></textarea>
            <br>
            <button class="copy-btn" onclick="copyShareCode()">üìã COPY</button>
            <button class="close-share-btn" onclick="closeShareModal()">Close</button>
        </div>
    </div>

    <div id="AuthModal" class="auth-modal">
        <div class="auth-box">
            <h2>Welcome to yakawow</h2>
            <p id="authMessage">Please log in or create an account to continue.</p>

            <div class="auth-form">
                <label><strong>Username:</strong></label>
                <input type="text" id="authUsername" placeholder="Enter username" autocomplete="username">

                <div id="loginPasswordSection">
                    <label><strong>Password:</strong></label>
                    <input type="password" id="authPassword" placeholder="Enter password"
                        autocomplete="current-password">
                    <button class="action-btn" onclick="handleLogin()">Login</button>
                </div>

                <div id="signupSection" style="display: none;">
                    <p style="color: #666; font-size: 14px; margin: 10px 0;">A random password will be generated for
                        you.</p>
                    <div id="generatedPasswordDisplay"
                        style="display: none; margin: 15px 0; padding: 15px; background: #f0f0f0; border-radius: 5px;">
                        <strong>Your Password:</strong>
                        <div style="font-family: monospace; font-size: 16px; margin: 10px 0; padding: 10px; background: white; border: 1px solid #ccc; border-radius: 3px; word-break: break-all;"
                            id="generatedPasswordText"></div>
                        <p style="color: #d9534f; font-size: 12px; margin-top: 10px;">‚ö†Ô∏è IMPORTANT: Save this password!
                            You'll need it to log in.</p>
                        <button class="copy-btn" onclick="copyGeneratedPassword()">üìã Copy Password</button>
                    </div>
                    <button class="action-btn" onclick="handleSignup()" id="createAccountBtn">Create Account</button>
                </div>

                <hr style="margin: 20px 0;">

                <button class="toggle-auth-btn" onclick="toggleAuthMode()" id="toggleAuthBtn">Create New
                    Account</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>